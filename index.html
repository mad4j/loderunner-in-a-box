<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title>Lode Runner in a Box</title>

    <script type="text/javascript" src="js-dos-api-3.0.js"></script>
    <script type="text/javascript" src="js/zingtouch.min.js"></script>

    <style type="text/css">
        body, html {
            height: 100%;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #000000; 
            font-family: Verdana, Geneva, Tahoma, sans-serif;
        }
        .dosbox-container { width: 640px; height: 400px; }
        .dosbox-container > .dosbox-overlay { background: url(cover.png); }
    </style>

  </head>
  <body>
    <div id="dosbox"></div>
    <br/>
    <!--
    <button onclick="dosbox.requestFullScreen();">Make fullscreen</button>
    -->
    
    <script type="text/javascript">
      var dosbox = new Dosbox({
        id: "dosbox",
        onload: function (dosbox) {
          dosbox.run("GAME.zip", "./LR.COM");
        },
        onrun: function (dosbox, app) {
          console.log("App '" + app + "' is runned");
        }
      });
    </script>

    <script type="text/javascript">
      //added fake auto-start
      window.onload = function() { 
        var elements = document.getElementsByClassName("dosbox-start");
        if (elements.length > 0) {
          elements[0].click();
        }
      };
    </script>

    <script type="text/javascript">
      var containerElement = document.getElementById('dosbox');
      var activeRegion = ZingTouch.Region(containerElement);
      
      var longTap = new ZingTouch.Tap({ maxDelay: 1000 });

      activeRegion.bind(containerElement, longTap, function(e) {

        console.log(e);

        var keyboardEvent = new KeyboardEvent("keydown", {
          bubbles : true,
          cancelable : true,
          char : "Q",
          key : "q",
          shiftKey : true,
          keyCode : 13
        });
        document.dispatchEvent(keyboardEvent);
      });

      document.onkeydown = function(evt) {
        console.log(evt);
      };

    </script>

  </body>
</html>